'''
Map raw data read via HID from a TiVo Slide Remote USB dongle to
symbolic commands. Specify if a button can "repeat" and if it
"accelerates" as it is held down. Symbolic commands include:

BACK, BACKSPACE, BLUE, CHDOWN, CHUP, CLEAR, DOWN, ENTER, FWD, GREEN, GUIDE,
INFO, INPUT, KEY_RELEASE, LEFT, LIVETV, MUTE, PAUSE, PLAY, REC, RED, RIGHT,
RWD, SELECT, SKIPBACK, SKIPFWD, SLIDE_CLEAR, SLIDE_CLOSE, SLIDE_DOWN,
SLIDE_LEFT, SLIDE_OPEN, SLIDE_RIGHT, SLIDE_SEARCH, SLIDE_SELECT, SLIDE_UP,
SLOMO, THUMBDOWN, THUMBUP, TIVO, TVPWR, UP, VOLDOWN, VOLUP, YELLOW, and ZOOM.

In addition, keyboard characters are mapped, including symbols.
'''

keys = {
  "1_0_0_0_0_0_0_0_0": "KEY_RELEASE",
  "17_0_0": "KEY_RELEASE",
  "16_0_0": "KEY_RELEASE",
  "19_90": "KEY_RELEASE",
  "19_80": "KEY_RELEASE",
  "16_70_0": "BACK",
  "16_107_0": "BLUE",
  "16_157_0": {
    "value": "CHDOWN",
    "repeat": True
  },
  "16_156_0": {
    "value": "CHUP",
    "repeat": True
  },
  "1_0_0_216_0_0_0_0_0": "CLEAR",
  "16_67_0": {
    "value": "DOWN",
    "repeat": True
  },
  "16_131_0": "ENTER",
  "16_179_0": {
    "value": "FWD",
    "repeat": True
  },
  "16_106_0": "GREEN",
  "16_141_0": {
    "value": "GUIDE",
    "repeat": True
  },
  "16_9_2": "INFO",
  "16_130_0": "INPUT",
  "16_68_0": {
    "value": "LEFT",
    "repeat": True
  },
  "17_62_0": "LIVETV",
  "16_226_0": "MUTE",
  "16_33_2": "SLIDE_SEARCH",
  "1_0_0_39_0_0_0_0_0": "0",
  "1_0_0_30_0_0_0_0_0": "1",
  "1_0_0_31_0_0_0_0_0": "2",
  "1_0_0_32_0_0_0_0_0": "3",
  "1_0_0_33_0_0_0_0_0": "4",
  "1_0_0_34_0_0_0_0_0": "5",
  "1_0_0_35_0_0_0_0_0": "6",
  "1_0_0_36_0_0_0_0_0": "7",
  "1_0_0_37_0_0_0_0_0": "8",
  "1_0_0_38_0_0_0_0_0": "9",
  "16_177_0": "PAUSE",
  "16_176_0": "PLAY",
  "16_178_0": "REC",
  "16_105_0": "RED",
  "16_69_0": {
    "value": "RIGHT",
    "repeat": True
  },
  "16_180_0": {
    "value": "RWD",
    "repeat": True
  },
  "16_65_0": "SELECT",
  "16_182_0": "SKIPBACK",
  "16_181_0": "SKIPFWD",
  "17_129_0": "SLIDE_CLOSE",
  "17_128_0": "SLIDE_OPEN",
  "16_245_0": "SLOMO",
  "17_65_0": "THUMBDOWN",
  "17_66_0": "THUMBUP",
  "17_61_0": {
    "value": "TIVO",
    "repeat": True
  },
  "19_100": "KEY_RELEASE",
  "16_48_0": "TVPWR",
  "16_66_0": {
    "value": "UP",
    "repeat": True
  },
  "16_234_0": {
    "value": "VOLDOWN",
    "repeat": True,
    "accelerates": True
  },
  "16_233_0": {
    "value": "VOLUP",
    "repeat": True,
    "accelerates": True
  },
  "16_108_0": "YELLOW",
  "16_109_0": "ZOOM",
  "1_0_0_4_0_0_0_0_0": "a",
  "1_2_0_4_0_0_0_0_0": "A",
  "1_2_0_36_0_0_0_0_0": "&",
  "1_2_0_37_0_0_0_0_0": "*",
  "1_2_0_31_0_0_0_0_0": "@",
  "1_0_0_5_0_0_0_0_0": "b",
  "1_2_0_5_0_0_0_0_0": "B",
  "1_0_0_42_0_0_0_0_0": {
    "value": "BACKSPACE",
    "repeat": True
  },
  "1_0_0_49_0_0_0_0_0": "\\",
  "1_0_0_6_0_0_0_0_0": "c",
  "1_2_0_6_0_0_0_0_0": "C",
  "1_2_0_35_0_0_0_0_0": "^",
  "1_0_0_156_0_0_0_0_0": "SLIDE_CLEAR",
  "1_2_0_51_0_0_0_0_0": ":",
  "1_0_0_54_0_0_0_0_0": ",",
  "1_2_0_47_0_0_0_0_0": "{",
  "1_2_0_48_0_0_0_0_0": "}",
  "1_0_0_7_0_0_0_0_0": "d",
  "1_2_0_7_0_0_0_0_0": "D",
  "1_0_0_45_0_0_0_0_0": "-",
  "1_0_0_81_0_0_0_0_0": {
    "value": "SLIDE_DOWN",
    "repeat": True
  },
  "1_0_0_8_0_0_0_0_0": "e",
  "1_2_0_8_0_0_0_0_0": "E",
  "1_0_0_40_0_0_0_0_0": "ENTER",
  "1_0_0_46_0_0_0_0_0": "=",
  "1_2_0_30_0_0_0_0_0": "!",
  "1_0_0_9_0_0_0_0_0": "f",
  "1_2_0_9_0_0_0_0_0": "F",
  "1_0_0_56_0_0_0_0_0": "/",
  "1_0_0_10_0_0_0_0_0": "g",
  "1_2_0_10_0_0_0_0_0": "G",
  "1_2_0_55_0_0_0_0_0": ">",
  "1_0_0_11_0_0_0_0_0": "h",
  "1_2_0_11_0_0_0_0_0": "H",
  "1_0_0_12_0_0_0_0_0": "i",
  "1_2_0_12_0_0_0_0_0": "I",
  "1_0_0_13_0_0_0_0_0": "j",
  "1_2_0_13_0_0_0_0_0": "J",
  "1_0_0_14_0_0_0_0_0": "k",
  "1_2_0_14_0_0_0_0_0": "K",
  "1_0_0_15_0_0_0_0_0": "l",
  "1_2_0_15_0_0_0_0_0": "L",
  "1_0_0_80_0_0_0_0_0": {
    "value": "SLIDE_LEFT",
    "repeat": True
  },
  "1_2_0_54_0_0_0_0_0": "<",
  "1_0_0_16_0_0_0_0_0": "m",
  "1_2_0_16_0_0_0_0_0": "M",
  "1_0_0_17_0_0_0_0_0": "n",
  "1_2_0_17_0_0_0_0_0": "N",
  "1_0_0_18_0_0_0_0_0": "o",
  "1_2_0_18_0_0_0_0_0": "O",
  "1_0_0_19_0_0_0_0_0": "p",
  "1_2_0_19_0_0_0_0_0": "P",
  "1_2_0_38_0_0_0_0_0": "(",
  "1_2_0_39_0_0_0_0_0": ")",
  "1_2_0_34_0_0_0_0_0": "%",
  "1_0_0_55_0_0_0_0_0": ".",
  "1_2_0_49_0_0_0_0_0": "|",
  "1_2_0_46_0_0_0_0_0": "+",
  "1_2_0_32_0_0_0_0_0": "#",
  "1_0_0_20_0_0_0_0_0": "q",
  "1_2_0_20_0_0_0_0_0": "Q",
  "1_2_0_56_0_0_0_0_0": "?",
  "1_2_0_52_0_0_0_0_0": "\"",
  "1_0_0_21_0_0_0_0_0": "r",
  "1_2_0_21_0_0_0_0_0": "R",
  "1_0_0_79_0_0_0_0_0": {
    "value": "SLIDE_RIGHT",
    "repeat": True
  },
  "1_0_0_22_0_0_0_0_0": "s",
  "1_2_0_22_0_0_0_0_0": "S",
  "16_33_2": "SLIDE_SEARCH",
  "1_0_0_119_0_0_0_0_0": "SLIDE_SELECT",
  "1_0_0_51_0_0_0_0_0": ";",
  "1_0_0_44_0_0_0_0_0": " ",
  "1_0_0_47_0_0_0_0_0": "[",
  "1_0_0_48_0_0_0_0_0": "]",
  "1_0_0_23_0_0_0_0_0": "t",
  "1_2_0_23_0_0_0_0_0": "T",
  "1_0_0_53_0_0_0_0_0": "`",
  "1_2_0_53_0_0_0_0_0": "~",
  "1_0_0_24_0_0_0_0_0": "u",
  "1_2_0_24_0_0_0_0_0": "U",
  "1_2_0_45_0_0_0_0_0": "_",
  "1_0_0_82_0_0_0_0_0": {
    "value": "SLIDE_UP",
    "repeat": True
  },
  "1_0_0_25_0_0_0_0_0": "v",
  "1_2_0_25_0_0_0_0_0": "V",
  "1_0_0_26_0_0_0_0_0": "w",
  "1_2_0_26_0_0_0_0_0": "W",
  "1_0_0_27_0_0_0_0_0": "x",
  "1_2_0_27_0_0_0_0_0": "X",
  "1_0_0_28_0_0_0_0_0": "y",
  "1_2_0_28_0_0_0_0_0": "Y",
  "1_0_0_29_0_0_0_0_0": "z",
  "1_2_0_29_0_0_0_0_0": "Z",
  "1_0_0_98_0_0_0_0_0": "0",
  "1_0_0_89_0_0_0_0_0": "1",
  "1_0_0_90_0_0_0_0_0": "2",
  "1_0_0_91_0_0_0_0_0": "3",
  "1_0_0_92_0_0_0_0_0": "4",
  "1_0_0_93_0_0_0_0_0": "5",
  "1_0_0_94_0_0_0_0_0": "6",
  "1_0_0_95_0_0_0_0_0": "7",
  "1_0_0_96_0_0_0_0_0": "8",
  "1_0_0_97_0_0_0_0_0": "9"
}

def map(value):
    value = '_'.join((str(c) for c in value))
    value = keys.get(value)
    if isinstance(value, dict):
        return value
    elif value:
        return {
            'value': value,
            'repeat': False
        }
